"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1563],{41932:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(51217),s=n(22830),a=n(35250),i=n(70079),o=n(19012);function l(e){var t=e.text,n=(0,o.Z)(),r=(0,s._)((0,i.useState)(!0),2),l=r[0],u=r[1],d=(0,s._)((0,i.useState)(0),2),f=d[0],h=d[1],m=(0,i.useMemo)(function(){return new c().humanTypingDelaysQuertyDistance(t)},[t]);return(0,i.useEffect)(function(){t&&l&&(u(!0),m.forEach(function(e,t){setTimeout(function(){n()&&(h(t),t===m.length-1&&u(!1))},e)}))},[m,n,l,t]),(0,a.jsx)(a.Fragment,{children:t.substring(0,f+1)})}var c=function(){function e(){(0,r._)(this,e)}var t=e.prototype;return t.qwertyDistance=function(e,t){var n,r,a={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},i=(0,s._)(null!==(n=a[e.toLowerCase()])&&void 0!==n?n:[0,0],2),o=i[0],l=i[1],c=(0,s._)(null!==(r=a[t.toLowerCase()])&&void 0!==r?r:[0,0],2);return Math.abs(o-c[0])+Math.abs(l-c[1])},t.humanTypingDelaysQuertyDistance=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=0,s=[],a=0;a<e.length;++a){var i=void 0;if(a>0){var o=this.qwertyDistance(e[a-1],e[a]);i=0===o?this.getRandomInt(t,Math.floor(n/2)):1===o?this.getRandomInt(t,Math.floor(2*n/3)):this.getRandomInt(t,n)}else i=this.getRandomInt(t,n);s.push(i+r),r+=i}return s},t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e}()},13940:function(e,t,n){n.d(t,{V:function(){return eh},Z:function(){return eu}});var r=n(39324),s=n(71209),a=n(22830),i=n(4337),o=n(35250),l=n(28735),c=n(10664),u=n(90408),d=n(82081),f=n(19841),h=n(72201),m=n(26430),v=n(84913),g=n(44043),p=n(82187),x=n(69262),y=n(70737),b=n(97296),j=n(91530),k=n.n(j),w=n(60554),N=n.n(w),M=n(70079),C=n(1454),_=n(94968),Z=n(70671),P=n(32004),T=n(21389),S=n(95137),R=n(32877),E=n(37469),I=n(78931),D=n(33669),B=n(66085),W=n(2166),L=n(21817),F=n(41932),O=n(67273),z=n(61402),A=n(79579),H=n(89368),$=n(20522),U=n(47428),q=n(92720),V=n(2295);function Y(e){var t=e.conversation,n=e.handleEditTitle,s=(0,V.iF)(),i=(0,a._)((0,M.useState)(!1),2),u=i[0],d=i[1];return(0,M.useEffect)(function(){return(0,l.LW)(c.n,{deleteChat:function(){d(!0)}})},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(q.Z.Root,{children:[(0,o.jsx)(U.xz,{asChild:!0,children:(0,o.jsxs)("button",{className:"absolute bottom-0 right-0 top-0 flex w-9 items-center justify-center rounded text-token-text-tertiary transition hover:text-token-text-secondary radix-state-open:text-token-text-secondary",children:[(0,o.jsx)("div",{className:"pointer-events-none absolute bottom-0 right-0 top-0 w-14 rounded bg-gradient-to-l from-token-surface-tertiary from-60% to-transparent"}),(0,o.jsx)(C.K9M,{className:"icon-sm relative"})]})}),(0,o.jsx)(q.Z.Portal,{children:(0,o.jsxs)(q.Z.Content,{align:"center",children:[(0,o.jsx)(q.Z.Item,{onClick:function(){n()},children:(0,o.jsx)(P.Z,(0,r._)({},K.renameConversation))}),(0,o.jsx)(q.Z.Item,{onClick:function(){d(!0)},children:(0,o.jsx)(P.Z,(0,r._)({},K.deleteConversation))})]})})]}),u&&(0,o.jsx)(eh,{title:t.title,handleDelete:function(){S.ZP.patchConversation(t.id,{is_visible:!1}).then(function(){s()}),N().push("/",void 0,{shallow:!0})},onClose:function(){d(!1)}})]})}function G(e){var t=e.conversation,n=e.onClose,r=function(){i!==t.title&&(E.tQ.setTitle(t.id,i,E._L.User),u.o.logEvent(d.a.renameThread,{threadId:t.id,content:i}),S.ZP.patchConversation(t.id,{title:i}).then(function(){c()}))},s=(0,a._)((0,M.useState)(t.title),2),i=s[0],l=s[1],c=(0,V.iF)();return(0,o.jsx)("input",{type:"text",value:i,onChange:function(e){l(e.target.value)},onKeyDown:function(e){switch(e.key){case"Escape":n();break;case"Enter":r(),n()}},onBlur:function(){r(),n()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function Q(e){var t=e.conversation,n=e.isActive,r=e.elementRef,s=(0,a._)((0,M.useState)(!1),2),i=s[0],l=s[1],c=(0,W.Z)(t.id,t.title,n),h=c.resolvedTitle,m=c.isTypingEffect,v=(0,D.w$)();return(0,o.jsxs)("div",{className:"group relative mx-1",children:[(0,o.jsx)("a",{href:(0,B.ZV)(t.id),onClick:function(e){if(e.preventDefault(),!n){var r;r=t.id,z.hx.abortAllRequests(),u.o.logEvent(d.a.loadThread,{threadId:r}),N().push((0,B.ZV)(r),void 0,{shallow:!0})}},onDoubleClick:function(){l(!0)},ref:r,className:(0,f.default)("flex items-center gap-2 rounded p-2",n&&"bg-token-surface-tertiary"),children:(0,o.jsx)("div",{className:"relative grow overflow-hidden whitespace-nowrap",children:m&&n&&v?(0,o.jsx)(F.Z,{text:null!=h?h:""}):h})}),i?(0,o.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-surface-tertiary",children:(0,o.jsx)(G,{conversation:t,onClose:function(){l(!1)}})}):n?(0,o.jsx)(Y,{conversation:t,handleEditTitle:function(){l(!0)}}):null]})}var K=(0,_.vU)({renameConversation:{id:"history.item.editConversationTitle",defaultMessage:"Rename conversation",description:"Menu item label in conversation sidebar"},deleteConversation:{id:"history.item.deleteConversation",defaultMessage:"Delete conversation",description:"Menu item label in conversation sidebar"}}),J=n(1821);function X(){var e=(0,i._)(["flex flex-col gap-2 pb-2 dark:text-gray-100 text-gray-800 text-sm\n",""]);return X=function(){return e},e}function ee(){var e=(0,i._)(["flex p-3 items-center gap-3 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer break-all\n","\n"]);return ee=function(){return e},e}function et(){var e=(0,i._)(["flex py-3 px-3 items-center gap-3 gizmo:gap-2 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer hover:pr-14 break-all\n","\n"]);return et=function(){return e},e}function en(){var e=(0,i._)(["text-sm border-none bg-transparent p-0 m-0 w-full"]);return en=function(){return e},e}function er(){var e=(0,i._)(["flex-1 text-ellipsis max-h-5 overflow-hidden break-all relative"]);return er=function(){return e},e}function es(){var e=(0,i._)(["h-9 pb-2 pt-3 px-3 text-xs text-gray-500 font-medium text-ellipsis overflow-hidden break-all bg-gray-50 gizmo:bg-white dark:bg-gray-900 gizmo:dark:bg-gray-800"]);return es=function(){return e},e}function ea(){var e=(0,i._)(["absolute inset-y-0 right-0 w-8 z-10 bg-gradient-to-l\n",""]);return ea=function(){return e},e}function ei(){var e=(0,i._)(["absolute flex right-1 z-10 dark:text-gray-300 text-gray-800\n",""]);return ei=function(){return e},e}function eo(){var e=(0,i._)(["p-1 hover:text-token-text-primary"]);return eo=function(){return e},e}var el=(0,_.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today",description:"Label for today's history bucket"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday",description:"Label for yesterday's history bucket"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days",description:"Label for the history bucket of the previous 7 days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days",description:"Label for the history bucket of the previous 30 days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history",description:"Error message when history fails to load"},retryButton:{id:"history.retryButton",defaultMessage:"Retry",description:"Button to retry loading history"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more",description:"Button to show more history items"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?",description:"Title of the modal to confirm deleting a conversation"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}.",description:"Body of the modal to confirm deleting a conversation"},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete",description:"Button to confirm deleting a conversation"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel",description:"Button to cancel deleting a conversation"}}),ec={initial:function(e){return e.isNew?{opacity:0,height:0,overflow:"hidden"}:{}},animate:function(){return{opacity:1,height:"auto"}},exit:function(){return{opacity:0,height:0}}};function eu(e){var t,n,s=e.activeId,i=e.onNewThread,l=(0,Z.Z)(),c=(0,a._)((0,M.useState)(!1),2),u=c[0],d=c[1],j=(0,a._)((0,M.useState)(0),2),k=j[0],w=j[1],N=(0,L.Z)(),C=(0,V.MO)(),_=C.conversations,T=C.hasNextPage,S=C.fetchNextPage,E=C.isLoading,D=C.isFetchingNextPage,B=C.isError,W=(0,I.hz)().has(R.DY),F=(0,M.useRef)(null),z=(0,M.useCallback)(function(e){var t;W&&!E&&null!=e&&(null===(t=F.current)||void 0===t||t.disconnect(),F.current=new IntersectionObserver(function(e){e[0].isIntersecting&&T&&S()}),F.current.observe(e))},[W,E,T,S]);(0,M.useEffect)(function(){return function(){var e;null===(e=F.current)||void 0===e||e.disconnect()}},[]);var A=(0,V.iF)();(0,V.Od)();var H=(t=(0,M.useRef)(),n=(0,M.useRef)(),((0,M.useEffect)(function(){t.current=n.current,n.current=_},[_]),_===n.current)?t.current:n.current);(0,M.useEffect)(function(){N(function(){w(k+1)},(0,m.Z)((0,v.Z)(),Date.now())+1e3)},[k,N]);var U=0===_.length,q=(0,$.Ml)(),Y=(0,M.useMemo)(function(){return _.reduce(function(e,t){var n,r,s=new Date(null!==(r=null!==(n=t.update_time)&&void 0!==n?n:t.create_time)&&void 0!==r?r:0),a=(0,h.Z)(new Date,s);if(0===a)e.recent.today.items.push(t);else if(a<=1)e.recent.yesterday.items.push(t);else if(a<=7)e.recent.lastSeven.items.push(t);else if(a<=30)e.recent.lastThirty.items.push(t);else if((0,x.Z)(s)){var i=(0,p.Z)(s),o=(0,g.Z)(s),c="".concat(i,"-").concat(o);e.dynamicMonths[c]?e.dynamicMonths[c].items.push(t):e.dynamicMonths[c]={label:l.formatDate(s,{month:"long"}),items:[t]}}else{var u=(0,p.Z)(s),d="".concat(u,"-");e.dynamicYears[d]?e.dynamicYears[d].items.push(t):e.dynamicYears[d]={label:l.formatDate(s,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,o.jsx)(P.Z,(0,r._)({},el.historyBucketToday)),items:[]},yesterday:{label:(0,o.jsx)(P.Z,(0,r._)({},el.historyBucketYesterday)),items:[]},lastSeven:{label:(0,o.jsx)(P.Z,(0,r._)({},el.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,o.jsx)(P.Z,(0,r._)({},el.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}})},[k,_]);return(0,o.jsxs)(ed,{$centered:E||B&&U,children:[U&&E&&(0,o.jsx)(J.Z,{className:"m-auto"}),U&&B&&(0,o.jsxs)("div",{className:"p-3 text-center italic text-gray-500",children:[(0,o.jsx)(P.Z,(0,r._)({},el.unableToLoadHistory)),!u&&(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)(O.z,{as:"button",color:"dark",size:"small",className:"m-auto mt-2",onClick:function(){d(!0),A()},children:(0,o.jsx)(P.Z,(0,r._)({},el.retryButton))})})]}),!E&&(0,o.jsx)("div",{children:(0,o.jsx)(y.M,{initial:!1,children:[Y.recent,Y.dynamicMonths,Y.dynamicYears].flatMap(function(e,t){return(0,o.jsx)("span",{children:Object.entries(e).map(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1],l=r.items,c=r.label;if("today"!==n&&!l.length)return null;var u=!!l.find(function(e){var t;return _.length>0&&e.id===(null===(t=_[0])||void 0===t?void 0:t.id)});return(0,o.jsxs)(b.E.div,{className:"relative",layoutId:"bucket-".concat(n),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[l.length>0&&(0,o.jsx)(b.E.div,{className:(0,f.default)("sticky top-0",u?"z-[16]":"z-[14]"),layoutId:"bucketTitle-".concat(n),layout:"position",children:(0,o.jsx)(ex,{children:c})}),(0,o.jsx)("ol",{children:l.map(function(e,t){var n=s===e.id,r=null==H?void 0:H.find(function(t){return t.id===e.id}),a=T&&_[_.length-5-1].id===e.id?z:void 0;return(0,o.jsx)(b.E.li,{className:(0,f.default)("relative",u&&0===t?"z-[15]":""),layoutId:"".concat(e.id),layout:"position",custom:{isNew:!r},variants:ec,initial:"initial",animate:"animate",exit:"exit",children:q?(0,o.jsx)(Q,{conversation:e,isActive:n,elementRef:a}):(0,o.jsx)(ef,{id:e.id,title:e.title,active:n,onNewThread:i,elementRef:a})},"history-item-".concat(e.id))})})]},n)})},"category-".concat(t))})})}),W?D&&(0,o.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,o.jsx)(J.Z,{})}):(0,o.jsx)(o.Fragment,{children:T&&(0,o.jsx)(O.z,{as:"button",onClick:function(){return S()},color:"dark",className:"m-auto mb-2",size:"small",loading:D,children:(0,o.jsx)(P.Z,(0,r._)({},el.showMoreButton))})})]})}var ed=T.Z.div(X(),function(e){return e.$centered&&"h-full justify-center items-center"});function ef(e){var t=e.id,n=e.title,r=e.active,s=e.onNewThread,i=e.elementRef,h=(0,D.w$)(),m=(0,a._)((0,M.useState)(!1),2),v=m[0],g=m[1],p=(0,M.useRef)(null),x=(0,V.iF)(),y=(0,M.useCallback)(function(e){var r,s;if(null==e||e.preventDefault(),g(!1),(null===(r=p.current)||void 0===r?void 0:r.value)&&(null===(s=p.current)||void 0===s?void 0:s.value)!==n){var a=p.current.value;E.tQ.setTitle(t,a,E._L.User),u.o.logEvent(d.a.renameThread,{threadId:t,content:a}),S.ZP.patchConversation(t,{title:a}).then(function(){x()})}},[t,x,n]),b=(0,M.useCallback)(function(e){"Enter"===e.key&&y()},[y]),j=(0,M.useCallback)(function(){S.ZP.patchConversation(t,{is_visible:!1}).then(function(){x()}),s()},[t,s,x]),w=(0,M.useCallback)(function(e){z.hx.abortAllRequests(),e.preventDefault(),u.o.logEvent(d.a.loadThread,{threadId:t}),N().push((0,B.ZV)(t),void 0,{shallow:!0})},[t]),_=(0,W.Z)(t,n,r),Z=_.resolvedTitle,P=_.isTypingEffect,T=(0,o.jsx)(C.IC0,{className:"icon-sm"}),R=(0,a._)((0,M.useState)(!1),2),I=R[0],L=R[1];if((0,M.useEffect)(function(){if(r)return(0,l.LW)(c.n,{deleteChat:function(){L(!0)}})},[r]),v)return(0,o.jsxs)(ev,{$active:r,children:[T,(0,o.jsx)(eg,{ref:p,type:"text",defaultValue:null!=Z?Z:"",autoFocus:!0,onKeyDown:b,className:"mr-0",onBlur:y}),(0,o.jsxs)(eb,{$active:!0,children:[(0,o.jsx)(ej,{onClick:y,children:(0,o.jsx)(C.UgA,{className:"icon-sm"})}),(0,o.jsx)(ej,{onClick:function(e){e.preventDefault(),g(!1)},children:(0,o.jsx)(C.q5L,{className:"icon-sm"})})]})]});var O=P&&r&&h;return(0,o.jsxs)(o.Fragment,{children:[r&&I&&(0,o.jsx)(eh,{title:n,handleDelete:j,onClose:function(){L(!1)}}),(0,o.jsxs)(em,{onClick:r?k():w,$active:r,className:(0,f.default)("group",O&&"animate-flash"),ref:i,children:[T,(0,o.jsxs)(ep,{children:[O?(0,o.jsx)(F.Z,{text:null!=Z?Z:""}):Z,(!P||!r)&&(0,o.jsx)(ey,{$active:r})]}),r&&(0,o.jsxs)(eb,{$active:r,children:[(0,o.jsx)(ej,{onClick:function(e){e.preventDefault(),g(!0)},children:(0,o.jsx)(C.Nte,{className:"icon-sm"})}),(0,o.jsx)(ej,{onClick:function(){L(!0)},children:(0,o.jsx)(C.Ybf,{className:"icon-sm"})})]})]})]})}function eh(e){var t=e.title,n=e.handleDelete,a=e.onClose,i=(0,Z.Z)();return(0,o.jsx)(H.Z,{isOpen:!0,onClose:a,type:"success",title:i.formatMessage(el.deleteModalTitle),primaryButton:(0,o.jsx)(A.ZP.Button,{title:i.formatMessage(el.deleteModalConfirm),color:"danger",onClick:function(){n(),a()}}),secondaryButton:(0,o.jsx)(A.ZP.Button,{title:i.formatMessage(el.deleteModalCancel),color:"neutral",onClick:a}),children:(0,o.jsx)(P.Z,(0,s._)((0,r._)({},el.deleteModalBody),{values:{title:(0,o.jsx)("strong",{children:t})}}))})}var em=T.Z.a(ee(),function(e){return e.$active?"bg-gray-100 dark:bg-gray-800 pr-14 dark:hover:bg-gray-800":"bg-gray-50 gizmo:bg-white gizmo:hover:bg-gray-100 hover:pr-4 dark:bg-gray-900"}),ev=T.Z.div(et(),function(e){return e.$active?"pr-14 bg-gray-100 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800":"bg-gray-100 dark:bg-gray-900"}),eg=T.Z.input(en()),ep=T.Z.div(er()),ex=T.Z.h3(es()),ey=T.Z.div(ea(),function(e){return e.$active?"dark:from-gray-800 from-gray-100":"dark:from-gray-900 from-gray-50 gizmo:from-white group-hover:from-gray-100 dark:group-hover:from-[#2A2B32]"}),eb=T.Z.div(ei(),function(e){return e.$active?"visible":"invisible group-hover:visible"}),ej=T.Z.button(eo())},52696:function(e,t,n){n.d(t,{$3:function(){return f},Ap:function(){return c},CV:function(){return h},GA:function(){return d},Gk:function(){return p},Ix:function(){return v},_O:function(){return g},bE:function(){return x},cI:function(){return m},qH:function(){return u}});var r=n(96237),s=n(75641),a=n(78931),i=n(62509),o=n(70079),l=n(70671);function c(){var e=(0,l.Z)(),t=e.formatMessage(y.adminRoleName),n=e.formatMessage(y.ownerRoleName),a=e.formatMessage(y.standardRoleName);return(0,o.useMemo)(function(){var e;return e={},(0,r._)(e,s.r3.OWNER,n),(0,r._)(e,s.r3.ADMIN,t),(0,r._)(e,s.r3.STANDARD,a),e},[n,t,a])}function u(e){var t=(0,l.Z)();return e?e.structure===s.CZ.PERSONAL?t.formatMessage(y.personalPlanName):t.formatMessage(y.enterprisePlanName):t.formatMessage(y.personalPlanName)}function d(e){return h((0,l.Z)(),e)}function f(){var e=(0,a.ec)(function(e){return e.currentWorkspace});return h((0,l.Z)(),e)}function h(e,t){var n;return t&&t.structure!==s.CZ.PERSONAL?null!==(n=t.name)&&void 0!==n?n:e.formatMessage(y.defaultWorkspaceTitle):e.formatMessage(y.personalWorkspaceTitle)}function m(){var e,t,n,r,s=(0,i.kP)().session;return null!==(r=null!==(n=null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.name)&&void 0!==n?n:null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.email)&&void 0!==r?r:null}function v(e){var t=(0,a.ec)(function(e){return e.currentWorkspace}),n=(0,a.ec)(a.F_.isPersonalWorkspace),r=(0,a.$T)(),i=d(t),o=m();return e&&!r?e.structure===s.CZ.PERSONAL?o:e.name:t?n?o:i:o}function g(){return(0,a.ec)(function(e){return e.workspaces})}function p(e){var t=g().find(function(t){return t.id===e});return(null==t?void 0:t.role)===s.r3.OWNER}function x(e){var t=g().find(function(t){return t.id===e});return(null==t?void 0:t.role)===s.r3.ADMIN}var y=(0,n(94968).vU)({defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace",description:"title for workspace without a name"},personalWorkspaceTitle:{id:"useWorkspaces.personalWorkspaceTitle",defaultMessage:"Personal account",description:"title for personal workspace"},personalPlanName:{id:"useWorkspaces.personalPlanName",defaultMessage:"Personal",description:"label for personal tier account"},enterprisePlanName:{id:"useWorkspaces.enterprisePlanName",defaultMessage:"Enterprise",description:"label for enterprise tier account"},adminRoleName:{id:"useWorkspaces.adminRoleName",defaultMessage:"Admin",description:"Role name for an admin user"},ownerRoleName:{id:"useWorkspaces.ownerRoleName",defaultMessage:"Owner",description:"Role name for an owner user"},standardRoleName:{id:"useWorkspacews.standardRoleName",defaultMessage:"Member",description:"Role name for a standard user"}})},18873:function(e,t,n){n.d(t,{Z:function(){return eZ}});var r=n(39324),s=n(71209),a=n(22830),i=n(4337),o=n(35250),l=n(70596),c=n(32877),u=n(78931),d=n(32542),f=n(32148),h=n(19841),m=n(44544),v=n(70079),g=n(1454),p=n(70671),x=n(32004),y=n(94968),b=n(21389),j=n(67273),k=n(45635),w=n(67),N=n(20522),M=n(12346),C=n(13090),_=n(86273),Z=n(21722),P=n(38104),T=n(95137),S=n(90408),R=n(82081),E=n(60554),I=n(35588),D=n(1821),B=n(88798),W=n(97296),L=n(5268),F=n(16920);function O(){var e=(0,i._)(["group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm"]);return O=function(){return e},e}function z(e){var t=e.showFreeTrialLoadingPayment,n=e.handleGetPaymentLink,i=(0,p.Z)(),l=(0,L.a)(["claimedReferralInvite"],function(){return T.ZP.getClaimedReferralInvite()},{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),c=l.data,u=l.isLoading,d=l.isSuccess,f=null==c?void 0:c.invite_code,m=(0,a._)((0,v.useState)(!1),2),y=m[0],b=m[1];if((0,v.useEffect)(function(){f&&!y&&d&&(b(!0),F.m9.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),S.o.logEvent(R.a.chatgptReferralShowClaimedSidebartMenuPromo))},[f,b,y,d]),!f||u||!d)return null;var j=f.invite_metadata.invite_data,k=(null==j?void 0:j.referral_trial_duration_months)?(null==j?void 0:j.referral_trial_duration_months)>1?i.formatMessage(H.monthsOfBenefit,{referralTrialDurationMonths:null==j?void 0:j.referral_trial_duration_months}):i.formatMessage(H.daysOfBenefit,{referralTrialDurationDays:null==j?void 0:j.referral_trial_duration_days}):null;return(0,o.jsx)(W.E.div,{className:(0,h.default)("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:(0,o.jsxs)(A,{className:(0,h.default)(t&&"opacity-75"),onClick:function(){t||((0,I.Vk)(!0),n())},children:[(0,o.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-3 ",children:[(0,o.jsx)(g.E33,{className:"icon-sm shrink-0"}),(0,o.jsx)(x.Z,(0,s._)((0,r._)({},H.freeTrialCta),{values:{duration:k}}))]}),!t&&(0,o.jsx)(g.q5L,{onClick:function(e){e.stopPropagation(),(0,I.zG)(!0),(0,I.H1)(!0)},className:"icon-md shrink-0 rounded-full p-0.5 text-gray-400 opacity-50  transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500  group-hover:opacity-100"}),(0,o.jsx)("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}var A=b.Z.a(O()),H=(0,y.vU)({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!",description:"Get free trial menu item"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}",description:"Duration of the referral trial benefits in months"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}",description:"Duration of the referral trial benefits in days"}}),$=n(15329),U=n(21739),q=n(38566);function V(){var e,t=(0,E.useRouter)(),n=(0,p.Z)(),s=(0,u.hz)(),a=(0,u.$T)(),i=(0,u.WY)(),l=(0,u.Zp)(),d=(e=(0,Z._)(function(){var e;return(0,P.Jh)(this,function(r){switch(r.label){case 0:(0,I.Vk)(!0),S.o.logEvent(R.a.clickAccountPaymentCheckout),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,T.ZP.getCheckoutLink()];case 2:return e=r.sent(),t.push(e.url),[3,5];case 3:return r.sent(),B.m.warning(n.formatMessage(G.paymentErrorWarning),{hasCloseButton:!0}),(0,I.Vk)(!1),[3,5];case 4:return[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)}),f=(0,I.tS)(function(e){return e.didCloseFreeTrial}),h=(0,I.tS)(function(e){return e.showFreeTrialLoadingPayment}),m=!f&&l,y=!i&&!s.has("disable_upgrade_ui"),b=(0,u.KQ)(),j=(0,U.g)(function(e){return e.flags.isUserInCanPayGroup}),k=(0,u.ec)(u.F_.isBusinessWorkspace),w=(0,I.tS)(function(e){return{setShowAccountPaymentModal:e.setShowAccountPaymentModal}}).setShowAccountPaymentModal,N=(0,v.useCallback)(function(){w(!0,function(){S.o.logEvent(R.a.clickSidebarAccountPaymentMenuItem)})},[w]),M=(0,q.C)(function(e){return{setShowReferralInviteModal:e.setShowReferralInviteModal}}).setShowReferralInviteModal,C=(0,v.useCallback)(function(){F.m9.logEvent("chatgpt_referral_invite_sidebar_clicked"),S.o.logEvent(R.a.chatgptReferralInviteSidebarClicked),M(!0,function(){S.o.logEvent(R.a.clickSidebarAccountPaymentMenuItem)})},[M]);return(0,o.jsxs)(o.Fragment,{children:[(s.has(c.a3)||i)&&(0,o.jsx)(Y,{handleReferralInvite:C}),!i&&m&&(0,o.jsx)(z,{showFreeTrialLoadingPayment:h,handleGetPaymentLink:d}),!a&&!1===i&&j&&!k&&(0,o.jsx)($.Vq,{onClick:m?function(){h||((0,I.Vk)(!0),d())}:N,className:"rounded-md",children:(0,o.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,o.jsxs)("span",{className:"gold-new-button flex items-center gap-3",children:[h?(0,o.jsx)(D.Z,{className:"icon-sm shrink-0"}):(0,o.jsx)(g.fzv,{className:"icon-sm shrink-0"}),b?(0,o.jsx)(x.Z,(0,r._)({},G.renewPlus)):(0,o.jsx)(x.Z,(0,r._)({},G.upgradeToPlus))]}),!s.has(c.a3)&&y&&!b&&(0,o.jsx)("span",{className:"rounded-md bg-yellow-200 px-1.5 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,o.jsx)(x.Z,(0,r._)({},G.newLabel))})]})})]})}var Y=function(e){var t=e.handleReferralInvite,n=(0,u.hz)().has(c.a3),s=(0,L.a)(["referralInvites"],function(){return T.ZP.getEligibleReferralInvites()},{enabled:n}),i=s.data,l=s.isSuccess,d=(null==i?void 0:i.invites_remaining)&&(null==i?void 0:i.invites_remaining)>0&&l,f=(0,a._)((0,v.useState)(!1),2),h=f[0],m=f[1];return((0,v.useEffect)(function(){d&&!h&&(m(!0),F.m9.logEvent("chatgpt_referral_show_sidebar_menu_item"),S.o.logEvent(R.a.chatgptReferralShowSidebarMenuItem))},[d,m,h]),d)?(0,o.jsx)($.Vq,{onClick:t,className:"rounded-md",children:(0,o.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,o.jsxs)("span",{className:"gold-new-button flex items-center gap-3",children:[(0,o.jsx)(g.zy7,{className:"icon-sm shrink-0"}),(0,o.jsx)(x.Z,(0,r._)({},G.inviteReferral))]}),(0,o.jsx)("span",{className:"rounded-md bg-yellow-200 px-1.5 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,o.jsx)(x.Z,(0,r._)({},G.newLabel))})]})}):null},G=(0,y.vU)({upgradeToPlus:{id:"PaymentMenuItems.upgradeToPlus",defaultMessage:"Upgrade to Plus",description:"Upgrade to Plus menu item"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus",description:"Renew Plus menu item"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend",description:"Invite referral menu item"},newLabel:{id:"PaymentMenuItems.newLabel",defaultMessage:"NEW",description:"Label for new features or items"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",description:"Error toast when payment page has an error",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}}),Q=n(81949),K=n(75641),J=n(33669),X=n(88809),ee=n(7813),et=n(62509),en=n(6948),er=n(61888),es=n(6038),ea=n(52696),ei=n(88327),eo=n(44513),el=n(46020);function ec(){var e=(0,u.WY)(),t=(0,u.hz)(),n=(0,v.useCallback)(function(){S.o.logEvent(R.a.clickSidebarAccountPortalMenuItem),el.vm.openModal(el.B.AccountPortal)},[]),s=t.has(c.Rw)||t.has(c.uo);return(0,o.jsxs)(o.Fragment,{children:[!0===e&&(0,o.jsxs)($.ZP,{onClick:n,children:[(0,o.jsx)(g.fzv,{className:"icon-sm shrink-0"}),(0,o.jsx)(x.Z,(0,r._)({},eu.myPlan))]}),s&&(0,o.jsxs)($.ZP,{onClick:function(){return el.vm.openModal(el.B.UserContext)},children:[(0,o.jsx)(ei.wP,{className:"h-4 w-4 shrink-0"}),(0,o.jsx)(x.Z,(0,r._)({},eu.chatPreferences))]})]})}var eu=(0,y.vU)({myPlan:{id:"popoverNavigation.myPlan",defaultMessage:"My plan",description:"My plan menu item"},chatPreferences:{id:"popoverNavigation.chatPreferences",defaultMessage:"Custom instructions",description:"Custom instructions menu item"}}),ed=n(57101),ef=n(9181),eh=n.n(ef);function em(){var e=(0,u.hz)(),t=e.has(c.Rw)||e.has(c.uo),n=(0,N.Ml)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ev,{href:"/admin",children:[(0,o.jsx)(ed.Z,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eg.myWorkspaceSettings))]}),e.has(c.L0.WorkspaceConversationTemplates)&&(0,o.jsxs)(ev,{href:n?"/gizmo/explore":"/templates",children:[(0,o.jsx)(g.Wpg,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eg.templates))]}),t&&(0,o.jsxs)($.ZP,{onClick:function(){return el.vm.openModal(el.B.UserContext)},children:[(0,o.jsx)(ei.wP,{className:"h-4 w-4"}),(0,o.jsx)(x.Z,(0,r._)({},eg.chatPreferences))]})]})}function ev(e){var t=e.href,n=e.children;return(0,o.jsx)(ee.v.Item,{children:function(e){var r=e.active;return(0,o.jsx)(eh(),{href:t,children:(0,o.jsx)($.ZB,{$as:"span",className:(0,h.default)(r?"bg-gray-100 dark:bg-gray-800":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"),children:n})})}})}var eg=(0,y.vU)({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Workspace settings",description:"Workspace settings menu item"},templates:{id:"workspacePopoverNavigation.templates",defaultMessage:"Templates",description:"Template directory menu item"},chatPreferences:{id:"workspacePopoverNavigation.chatPreferences",defaultMessage:"Custom instructions",description:"Custom instructions menu item"}});function ep(e){var t=e.onClickSettings;return(0,o.jsxs)(ee.v,{as:"div",className:"group relative",children:[(0,o.jsx)(eN,{}),(0,o.jsx)(eo.m,{children:(0,o.jsx)(ee.v.Items,{className:"absolute bottom-full left-0 z-20 mb-1 w-full overflow-hidden rounded-md bg-white pb-1.5 pt-1 outline-none dark:bg-gray-950",children:(0,o.jsx)(ew,{onClickSettings:t})})})]})}function ex(){var e=(0,et.kP)().session,t=null==e?void 0:e.user;return t?(0,o.jsxs)("div",{className:"px-3 py-2",children:[(0,o.jsx)("div",{className:"text-sm font-bold text-gray-600 dark:text-gray-400",children:(0,o.jsx)(x.Z,(0,r._)({},eC.accountSwitcherTitle))}),(0,o.jsx)("div",{className:"text-sm text-gray-400 dark:text-gray-600",children:null==t?void 0:t.email})]}):null}function ey(){var e=(0,u.ec)(function(e){return e.currentWorkspace}),t=(0,p.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ex,{}),(0,o.jsxs)("div",{className:"flex w-full items-center justify-start gap-2 px-3 py-1",children:[(0,o.jsx)(es.zf,{iconSize:"medium",workspace:e}),(0,o.jsx)("div",{className:"flex-grow text-base dark:text-white",children:(0,ea.CV)(t,e)})]}),(0,o.jsx)($.R,{})]})}function eb(){var e=(0,p.Z)(),t=(0,u.ec)(function(e){return e.workspaces}),n=(0,u.ec)(function(e){return e.currentWorkspace}),r=(0,a._)((0,v.useState)(!1),2),s=r[0],i=r[1],l=(0,er.compact)([t.find(function(e){return e.structure===K.CZ.PERSONAL})].concat((0,Q._)(t.filter(function(e){return e.structure!==K.CZ.PERSONAL}))));return l.sort(function(e,t){return e.structure===K.CZ.PERSONAL?1:t.structure===K.CZ.PERSONAL?-1:0}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ex,{}),(0,o.jsx)("div",{className:"flex w-full flex-col",children:l.map(function(t){return(0,o.jsx)($.ZP,{onClick:function(){t.id!==(null==n?void 0:n.id)&&(i(!0),u.w_.setCurrentWorkspace(t),(0,X.M)())},children:(0,o.jsxs)("div",{className:"flex w-full items-center justify-start gap-3 py-1",children:[(0,o.jsx)(es.zf,{iconSize:"small",workspace:t,className:"flex-shrink-0"}),(0,o.jsx)("div",{className:"flex-grow truncate dark:text-white",children:(0,ea.CV)(e,t)}),s?(0,o.jsx)(D.Z,{}):(0,o.jsx)("div",{className:(0,h.default)("flex h-4 w-4 flex-shrink-0 rounded-full border align-middle",{"bg-white":t.id===(null==n?void 0:n.id)}),children:t.id===(null==n?void 0:n.id)&&(0,o.jsx)(g.UgA,{className:"m-auto h-3 w-3 scale-x-75 stroke-black stroke-[4]"})})]})},t.id)})}),(0,o.jsx)($.R,{})]})}var ej="oai/apps/hasSeenUserSurvey6_23";function ek(){var e=(0,p.Z)(),t=(0,J.w$)(),n=(0,a._)((0,v.useState)(!1),2),s=n[0],i=n[1],l=en.m.getItem(ej);return s||l?null:(0,o.jsx)("div",{className:"mx-1 mb-1 rounded-sm bg-[#0077FF]",children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-stretch gap-3 p-3 text-sm text-white",children:[(0,o.jsxs)("div",{className:"flex w-full items-start",children:[(0,o.jsxs)("div",{className:"flex-grow",children:[(0,o.jsx)("div",{className:"font-bold",children:(0,o.jsx)(x.Z,(0,r._)({},eC.surveyTitle))}),(0,o.jsx)("div",{children:(0,o.jsx)(x.Z,(0,r._)({},eC.surveyDescription))})]}),(0,o.jsx)("button",{className:"text-white/25 hover:text-white/40",onClick:function(){i(!0),en.m.setItem(ej,!0)},"aria-label":e.formatMessage(eC.surveyDismiss),children:(0,o.jsx)(ei.QF,{width:t?"20px":"24px",height:t?"20px":"24px"})})]}),(0,o.jsxs)("a",{href:"https://openai.qualtrics.com/jfe/form/SV_7QmSGWHymCCmIxE",target:"_blank",className:"flex w-full flex-row items-center justify-center gap-2 rounded-[4px] bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:function(){en.m.setItem(ej,!0),i(!0)},children:[(0,o.jsx)(g.AlO,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eC.takeSurveyButton))]})]})})}function ew(e){var t=e.onClickSettings,n=(0,u.WY)(),s=(0,u.ec)(u.F_.isBusinessWorkspace),a=(0,u.hz)(),i=a.has(c.G_),l=(0,u.ec)(u.F_.hasMultipleWorkspaces),d=(0,J.w$)(),f=a.has(c.rk);return(0,o.jsxs)("nav",{children:[i&&(0,o.jsx)(ek,{}),l?(0,o.jsx)(eb,{}):s&&(0,o.jsx)(ey,{}),s?(0,o.jsx)(em,{}):(0,o.jsx)(ec,{}),(!f||!d)&&(0,o.jsxs)($.ZP,{as:"a",href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:function(){S.o.logEvent(R.a.clickFaqLink)},children:[(0,o.jsx)(g.AlO,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eC.helpAndFaq))]}),(0,o.jsxs)($.ZP,{onClick:t,children:[(0,o.jsx)(g.nbt,{className:"icon-sm"}),n?(0,o.jsx)(x.Z,(0,r._)({},eC.settingsPlus)):(0,o.jsx)(x.Z,(0,r._)({},eC.settings))]}),(0,o.jsx)($.R,{}),(0,o.jsxs)($.ZP,{onClick:function(){S.o.logEvent(R.a.clickLogOut,{eventSource:"mouse"}),(0,et.w7)()},children:[(0,o.jsx)(g.xqh,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eC.logOut))]})]})}function eN(){var e=(0,et.kP)().session;return(null==e?void 0:e.user)?(0,o.jsx)(eM,{}):null}function eM(){var e=(0,ea.$3)(),t=(0,ea.cI)(),n=(0,u.ec)(u.F_.isBusinessWorkspace),r=(0,u.ec)(u.F_.hasMultipleWorkspaces);return(0,o.jsxs)(ee.v.Button,{className:"flex w-full items-center gap-3 rounded-md px-3 py-3 text-sm transition-colors duration-200 hover:bg-gray-100 group-ui-open:bg-gray-100 dark:hover:bg-gray-800 dark:group-ui-open:bg-gray-800",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)(es.zf,{iconSize:"medium"})}),(0,o.jsxs)("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-left text-gray-700 dark:text-white",children:[(0,o.jsx)("div",{className:"font-semibold",children:n?e:t}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:n?t:r?e:null})]}),(0,o.jsx)(g.K9M,{className:"icon-sm flex-shrink-0 text-gray-500"})]})}var eC=(0,y.vU)({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ",description:"Help & FAQ menu item"},settings:{id:"navigation.settings",defaultMessage:"Settings",description:"Settings menu item"},settingsPlus:{id:"navigation.settingsPlus",defaultMessage:"Settings & Beta",description:"Settings menu item for Plus users"},logOut:{id:"navigation.logOut",defaultMessage:"Log out",description:"Log out menu item"},takeSurveyButton:{id:"navigation.survey.takeSurveyButton",defaultMessage:"Take survey",description:"Survey offer call to action"},surveyDismiss:{id:"navigation.surveyDismiss",defaultMessage:"Dismiss survey",description:"Survey offer dismiss button"},surveyDescription:{id:"navigation.surveyDescription",defaultMessage:"Shape the future of ChatGPT.",description:"Survey offer description"},surveyTitle:{id:"navigation.surveyTitle",defaultMessage:"We’d love to hear from you!",description:"Survey offer title"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces",description:"Account switcher title"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace",description:"title for workspace without a name"}});function e_(){var e=(0,i._)(["flex-col flex-1 transition-opacity duration-500 -mr-2 pr-2\n  ",""]);return e_=function(){return e},e}function eZ(e){var t=e.onNewThread,n=e.children,a=(0,p.Z)(),i=(0,u.hz)().has(c.Ue),l=(0,u.ec)(u.F_.isBusinessWorkspace),m=(0,v.useRef)(null),y=(0,v.useContext)(d.QL),b=y.historyDisabled,k=y.toggleHistoryDisabled,w=(0,y.getModifiedSettings)(),_=(0,M.Fr)().openSettings;(0,v.useEffect)(function(){w&&_()},[]);var Z=(0,v.useCallback)(function(){t(),k()},[t,k]),P=(0,o.jsxs)("div",{className:(0,h.default)("absolute left-0 top-14 z-20 overflow-hidden transition-all duration-500",b?"visible max-h-72":"invisible max-h-0"),children:[(0,o.jsxs)("div",{className:"bg-gray-900 px-4 py-3",children:[(0,o.jsx)("div",{className:"p-1 text-sm text-gray-100",children:(0,o.jsx)(x.Z,(0,r._)({},eR.chatHistoryOff))}),(0,o.jsx)("div",{className:"p-1 text-xs text-gray-500",children:(0,o.jsx)(x.Z,(0,s._)((0,r._)({},l?eR.chatHistoryOffDescriptionBusiness:eR.chatHistoryOffDescription),{values:{learnMore:(0,o.jsx)("a",{href:"https://help.openai.com/en/articles/7730893",target:"_blank",className:"underline",rel:"noreferrer",children:(0,o.jsx)(x.Z,(0,r._)({},eR.learnMore))}),b:function(e){return(0,o.jsx)("strong",{children:e})}}}))}),(0,o.jsxs)(j.z,{className:"mt-4 w-full",onClick:Z,color:"primary",size:"medium",children:[(0,o.jsx)(g.$IY,{className:"icon-sm"}),(0,o.jsx)(x.Z,(0,r._)({},eR.enableChatHistory))]})]}),(0,o.jsx)("div",{className:"h-24 bg-gradient-to-t from-gray-900/0 to-gray-900"})]}),T=(0,N.Ml)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"scrollbar-trigger relative h-full w-full flex-1 items-start border-white/20",children:[(0,o.jsx)(f.f,{asChild:!0,children:(0,o.jsx)("h2",{children:(0,o.jsx)(x.Z,(0,r._)({},eR.chatHistoryLabel))})}),(0,o.jsxs)("nav",{className:"flex h-full w-full flex-col p-2","aria-label":a.formatMessage(eR.chatHistoryLabel),children:[T?(0,o.jsx)(eT,{onNewThread:t}):(0,o.jsxs)("div",{className:"mb-1 flex flex-row gap-2",children:[(0,o.jsxs)(C.MP,{onClick:t,className:"bg-white dark:bg-transparent",children:[b?(0,o.jsx)(g.Bw1,{className:"icon-sm shrink-0"}):(0,o.jsx)(g.OvN,{className:"icon-sm shrink-0"}),(0,o.jsx)("span",{className:"truncate",children:(0,o.jsx)(x.Z,(0,r._)({},b?eR.clearChat:eR.newChat))})]}),i&&(0,o.jsx)(C.H,{})]}),P,(0,o.jsx)(eS,{ref:m,$disableScroll:b,children:n}),(0,o.jsx)(eP,{})]})]})})}function eP(){var e=(0,a._)((0,v.useState)(function(){var e=(0,m.getCookie)(l.Yl);return"string"==typeof e&&e!==l.bC}),1)[0],t=(0,u.hz)(),n=t.has(c.Rw)||t.has(c.uo),r=(0,M.Fr)().openSettings,s=(0,u.$T)();return e&&s?null:(0,o.jsxs)("div",{className:"border-t border-black/20 pt-2 empty:hidden gizmo:border-token-border-light dark:border-white/20",children:[(0,o.jsx)(V,{}),(0,o.jsx)(ep,{onClickSettings:function(){return r()}}),n&&(0,o.jsx)(_.wm,{})]})}function eT(e){var t=e.onNewThread;return(0,o.jsxs)("div",{className:"flex justify-between py-1 pl-3 pr-2",children:[(0,o.jsx)(w.m,{}),(0,o.jsx)(k.u,{label:(0,o.jsx)(x.Z,(0,r._)({},eR.newChat)),side:"right",sideOffset:4,children:(0,o.jsx)("button",{onClick:t,className:"flex h-10 w-11 items-center justify-center rounded-lg text-token-text-secondary hover:bg-token-surface-secondary",children:(0,o.jsx)(g.vPQ,{className:"icon-sm"})})})]})}var eS=b.Z.div(e_(),function(e){return e.$disableScroll?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}),eR=(0,y.vU)({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history",description:"Chat history label heading"},chatHistoryOff:{id:"NavigationContent.chatHistoryOff",defaultMessage:"Chat History is off for this browser.",description:"Text indicating that chat history is turned off"},chatHistoryOffDescription:{id:"NavigationContent.chatHistoryOffDescription",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, be used to train our models, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}",description:"Description for chat history being off"},chatHistoryOffDescriptionBusiness:{id:"NavigationContent.chatHistoryOffDescriptionBusiness",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}",description:"Description for chat history being off"},learnMore:{id:"NavigationContent.learnMore",defaultMessage:"Learn more",description:"Learn more link text"},enableChatHistory:{id:"NavigationContent.enableChatHistory",defaultMessage:"Enable chat history",description:"Enable chat history button label"},clearChat:{id:"NavigationContent.clearChat",defaultMessage:"Clear chat",description:"Clear chat button label"},newChat:{id:"NavigationContent.newChat",defaultMessage:"New Chat",description:"New chat button label"}})},2166:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(22830),s=n(70079),a=n(37469);function i(e,t,n){var i=(0,a.XL)(e),o=i.title,l=i.titleSource,c=(0,r._)((0,s.useState)(!1),2),u=c[0],d=c[1],f=null!=o?o:t,h=(0,s.useRef)(f);return(0,s.useEffect)(function(){return n&&l===a._L.Generated&&f!==h.current&&d(!0),function(){h.current=f}},[n,f,l]),{isTypingEffect:u,resolvedTitle:f}}},21817:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(70079);function s(){var e=(0,r.useRef)([]),t=(0,r.useRef)(function(t,n){var r=setTimeout(t,n);return e.current.push(r),r});return(0,r.useEffect)(function(){var t=e.current;return function(){t.forEach(function(e){clearTimeout(e)})}},[]),t.current}}}]);